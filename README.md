# go-trendboard

GitHubä¸Šã®Go OSSã®ã‚¹ã‚¿ãƒ¼æ•°ãƒ»ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’è‡ªå‹•é›†è¨ˆã—ã€é™çš„ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹ãƒ„ãƒ¼ãƒ«ã€‚
Goã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã§äººæ°—ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å®šæœŸçš„ã«ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ã—ã€Markdownã‚„HTMLã§å¯è¦–åŒ–ã—ã¾ã™ã€‚GitHub Actionsã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€æ¯æ—¥è‡ªå‹•æ›´æ–°ã•ã‚Œã‚‹ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ä½œæˆã§ãã¾ã™ã€‚

## âœ¨ Features

- GitHub APIã‹ã‚‰Goãƒªãƒã‚¸ãƒˆãƒªã®ã‚¹ã‚¿ãƒ¼æ•°ã‚’è‡ªå‹•å–å¾—
- éå»ãƒ‡ãƒ¼ã‚¿ã¨ã®æ¯”è¼ƒã‹ã‚‰ã‚¹ã‚¿ãƒ¼å¢—åŠ æ•°ã‚’ç®—å‡º (ç¾åœ¨ã€é€±æ¬¡ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’ã‚µãƒãƒ¼ãƒˆ)
- Markdown / HTMLå½¢å¼ã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’è‡ªå‹•ç”Ÿæˆ
- `init`, `update`, `generate` ã®ã‚·ãƒ³ãƒ—ãƒ«ãªCLIã‚³ãƒãƒ³ãƒ‰
- Dockerã«ã‚ˆã‚‹ã‚³ãƒ³ãƒ†ãƒŠåŒ–ã•ã‚ŒãŸå®Ÿè¡Œç’°å¢ƒ
- GitHub Actionsã«ã‚ˆã‚‹å®šæœŸæ›´æ–°ï¼ˆcronï¼‰ã‚’ã‚µãƒãƒ¼ãƒˆ
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«(`repos.json`)ã§ç›£è¦–å¯¾è±¡OSSã‚’æŸ”è»Ÿã«ç®¡ç†


## ğŸ“¦ Installation

ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹ã‹ã€Goã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã‚‹å ´åˆã¯ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

```sh
go install github.com/yourname/go-trendboard/cmd/trendboard@latest
```
*`yourname`ã®éƒ¨åˆ†ã¯ã‚ãªãŸã®GitHubãƒ¦ãƒ¼ã‚¶ãƒ¼åã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚*

## ğŸ›  Usage

### CLI

#### 1. Initialize

`repos.json` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç”Ÿæˆã—ã¾ã™ã€‚ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’ç›£è¦–ã—ãŸã„ãƒªãƒã‚¸ãƒˆãƒªã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—ã—ã¾ã™ã€‚

```sh
go-trendboard init
```

#### 2. Update Data

`repos.json` ã«åŸºã¥ã„ã¦GitHub APIã‹ã‚‰æœ€æ–°ã®ã‚¹ã‚¿ãƒ¼æ•°ã‚’å–å¾—ã—ã€`data/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« `{YYYY-MM-DD}.json` ã¨ã„ã†å½¢å¼ã§ä¿å­˜ã—ã¾ã™ã€‚

```sh
# GITHUB_TOKENã®ã‚»ãƒƒãƒˆãŒå¿…è¦
export GITHUB_TOKEN="your_github_personal_access_token"

go-trendboard update
```

#### 3. Generate Dashboard

`data/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’å…ƒã«ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’è¨ˆç®—ã—ã€ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãƒ•ã‚¡ã‚¤ãƒ« (`dashboard.md` ã¾ãŸã¯ `dashboard.html`) ã‚’ç”Ÿæˆã—ã¾ã™ã€‚

```sh
go-trendboard generate
```

### Docker

Dockerã¨Docker ComposeãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚Œã°ã€ã‚ˆã‚Šç°¡å˜ã«å®Ÿè¡Œã§ãã¾ã™ã€‚

1. `.env.example` ã‚’ `.env` ã«ãƒªãƒãƒ¼ãƒ ã—ã€`GITHUB_TOKEN` ã‚’è¨­å®šã—ã¾ã™ã€‚
2. ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚

```sh
# åˆæœŸåŒ–
docker-compose run --rm app init

# ãƒ‡ãƒ¼ã‚¿æ›´æ–°
docker-compose run --rm app update

# ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç”Ÿæˆ (HTMLå½¢å¼)
docker-compose run --rm -e DASHBOARD_FORMAT=html -e DASHBOARD_FILE_PATH=output/dashboard.html app generate
```
ç”Ÿæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã® `data/` ã‚„ `output/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚

## ğŸ”§ Configuration

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®æŒ™å‹•ã¯ç’°å¢ƒå¤‰æ•°ã§åˆ¶å¾¡ã§ãã¾ã™ã€‚

| ç’°å¢ƒå¤‰æ•°                  | èª¬æ˜                                               | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤        |
| ------------------------- | -------------------------------------------------- | ------------------- |
| `GITHUB_TOKEN`            | (å¿…é ˆ) GitHub APIã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®ãƒˆãƒ¼ã‚¯ãƒ³      | -                   |
| `LOG_LEVEL`               | ãƒ­ã‚°ãƒ¬ãƒ™ãƒ« (`debug`, `info`, `warn`, `error`)      | `info`              |
| `REPOS_FILE_PATH`         | ç›£è¦–å¯¾è±¡ãƒªãƒã‚¸ãƒˆãƒªãƒªã‚¹ãƒˆã®ãƒ‘ã‚¹                     | `repos.json`        |
| `DATA_DIR_PATH`           | æ—¥æ¬¡ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ‘ã‚¹             | `data`              |
| `DASHBOARD_FILE_PATH`     | ç”Ÿæˆã•ã‚Œã‚‹ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®å‡ºåŠ›å…ˆãƒ‘ã‚¹               | `dashboard.md`      |
| `DASHBOARD_FORMAT`        | ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ (`md` or `html`)      | `md`                |
| `DASHBOARD_TEMPLATE_PATH` | HTMLãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãƒ‘ã‚¹               | `dashboard.tpl`     |

## ğŸ¤– GitHub Actions

ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã«ã¯ã€`.github/workflows/update.yml` ãŒå«ã¾ã‚Œã¦ãŠã‚Šã€ä»¥ä¸‹ã®è‡ªå‹•åŒ–ã‚’å®Ÿç¾ã—ã¾ã™ã€‚

- æ¯æ—¥0æ™‚(UTC)ã«å®šæ™‚å®Ÿè¡Œ
- `update` ã¨ `generate` ã‚³ãƒãƒ³ãƒ‰ã‚’é †ã«å®Ÿè¡Œ
- ç”Ÿæˆã•ã‚ŒãŸ `dashboard.md` ã¨ `data/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å¤‰æ›´ã‚’è‡ªå‹•ã§ã‚³ãƒŸãƒƒãƒˆï¼†ãƒ—ãƒƒã‚·ãƒ¥

ã“ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã«ã¯ã€ãƒªãƒã‚¸ãƒˆãƒªã® `Settings > Actions > General` ã§ `Workflow permissions` ã‚’ "Read and write permissions" ã«è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

## ğŸ“œ License

This project is licensed under the MIT License.
